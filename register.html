<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<head>
    <title>register page </title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js"
        integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="register.css">
</head>

<body>
    <h2>Sign Up</h2>

    <div class="outer">
        <form onsubmit="register()">
            <div class="imgContainer">
                <img src="images/registerlogo.png" alt="avatar" class="avatar">
            </div>

            <div class="box">
                <input type="text" name="name" id="name" placeholder="user name" pattern="[A-Za-z ]{3,32}" required
                    autofocus> <br>
                <input type="email" name="email" id="email" placeholder="email"
                    pattern="[a-z0-9]+@[a-z]+.[a-z]{1,32}$" required> <br>
                <input type="password" name="password" id="password" placeholder="password" required> <br>
                <button type="submit">submit</button><br>
            </div>

            <div class="container" style="background-color:#f1f1f1">
            <a href="index.html"><button type="button" class="cancelButton">Cancel</button></a>
            </div>
        </form>
    </div>

    <script>
        function register() {
            event.preventDefault();
            const name = document.querySelector("#name").value;
            const email = document.querySelector("#email").value;
            const password = document.querySelector("#password").value;
            console.log(name + "+" + email + "+" + password);
            let registerValues = {
                "name": name,
                "email": email,
                "password": password
            };
            console.log(registerValues);
            if (email == "" || email == null || email.trim == "") {
                alert("invalid email");
            }
            else if (password.length <= 6) {
                alert("password is too short");
            }
            else {
                
                UserService.register(registerValues).then(res => {
                    localStorage.setItem("LOGGED_IN_USER", JSON.stringify(res.data));
                    alert("register successful");
                    window.location.href = "index.html";
                }).catch(err => {
                    alert("registration failed");
                });
            }
        }
    </script>
    <script src="assest/User-Service.js"></script>
</body>

</html>